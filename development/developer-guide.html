<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="Docutils 0.19: https://docutils.sourceforge.io/" name="generator"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="ie=edge" http-equiv="x-ua-compatible"/>
  <meta content="Copy to clipboard" name="lang:clipboard.copy"/>
  <meta content="Copied to clipboard" name="lang:clipboard.copied"/>
  <meta content="en" name="lang:search.language"/>
  <meta content="True" name="lang:search.pipeline.stopwords"/>
  <meta content="True" name="lang:search.pipeline.trimmer"/>
  <meta content="No matching documents" name="lang:search.result.none"/>
  <meta content="1 matching document" name="lang:search.result.one"/>
  <meta content="# matching documents" name="lang:search.result.other"/>
  <meta content="[\s\-]+" name="lang:search.tokenizer"/>
  <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&amp;display=fallback" rel="stylesheet"/>
  <style>
   body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
  </style>
  <link href="../_static/stylesheets/application.css" rel="stylesheet"/>
  <link href="../_static/stylesheets/application-palette.css" rel="stylesheet"/>
  <link href="../_static/stylesheets/application-fixes.css" rel="stylesheet"/>
  <link href="../_static/fonts/material-icons.css" rel="stylesheet"/>
  <meta content="#262626" name="theme-color"/>
  <script src="../_static/javascripts/modernizr.js">
  </script>
  <link href="../_static/images/flux-operator.jpg" rel="apple-touch-icon"/>
  <title>
   Developer Guide — Flux Operator
  </title>
  <link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
  <link href="../_static/material.css" rel="stylesheet" type="text/css"/>
  <link href="../_static/copybutton.css" rel="stylesheet" type="text/css"/>
  <link href="../_static/css/rtd_sphinx_search.min.css" rel="stylesheet" type="text/css"/>
  <link href="../_static/custom.css" rel="stylesheet" type="text/css"/>
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js">
  </script>
  <script src="../_static/jquery.js">
  </script>
  <script src="../_static/underscore.js">
  </script>
  <script src="../_static/_sphinx_javascript_frameworks_compat.js">
  </script>
  <script src="../_static/doctools.js">
  </script>
  <script src="../_static/sphinx_highlight.js">
  </script>
  <script src="../_static/clipboard.min.js">
  </script>
  <script src="../_static/copybutton.js">
  </script>
  <script src="../_static/js/rtd_sphinx_search.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js">
  </script>
  <link href="../_static/favicon.ico" rel="shortcut icon"/>
  <link href="../genindex.html" rel="index" title="Index"/>
  <link href="../search.html" rel="search" title="Search"/>
  <link href="creation.html" rel="next" title="Operator Creation"/>
  <link href="index.html" rel="prev" title="Development"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
  <!-- Social: Facebook / Open Graph -->
  <title>
   Flux RESTful API in Python
  </title>
  <link href="https://flux-framework.github.io/flux-restful-api/" rel="canonical"/>
  <meta content="website" property="og:type"/>
  <meta content="https://flux-framework.github.io/flux-restful-api/" property="og:url"/>
  <meta content="Flux RESTful API" property="og:title"/>
  <meta content="https://raw.githubusercontent.com/flux-framework/flux-restful-api/main/docs/images/logo.png" property="og:image"/>
  <meta content="Flux RESTful API in Python" property="og:description"/>
  <meta content="Flux RESTful API" property="og:site_name"/>
  <meta content="en_US" property="og:locale"/>
  <!-- Social: Twitter -->
  <meta content="summary" name="twitter:card"/>
  <meta content="@FluxFramework" name="twitter:site"/>
  <meta content="Flux Framework" name="twitter:title"/>
  <meta content="Flux RESTFul API in Python" name="twitter:description"/>
  <meta content="https://raw.githubusercontent.com/flux-framework/flux-restful-api/main/docs/images/logo.png" name="twitter:image"/>
  <!-- Social: Google+ / Schema.org  -->
  <meta content="Flux RESTful API" itemprop="name"/>
  <meta content="Flux RESTFul API in Python" itemprop="description"/>
  <meta content="https://raw.githubusercontent.com/flux-framework/flux-restful-api/main/docs/images/logo.png" itemprop="image"/>
  <script type="application/ld+json">
   {"@type":"WebSite","headline":"Flux RESTful API","url":"https://flux-framework.github.io/flux-restful-api","description":"Flux RESTful API in Python","name":"Flux RESTful API","@context":"https://schema.org"}
  </script>
  <style>
   .material-symbols-outlined {
  font-variation-settings:
  'FILL' 0,
  'wght' 400,
  'GRAD' 0,
  'opsz' 48
}
.sphx-glr-script-out .highlight pre {
  background-color: #def0ff !important;
}
  </style>
  <link href="../_static/images/flux-operator.jpg" rel="apple-touch-icon"/>
 </head>
 <body data-md-color-accent="blue" data-md-color-primary="blue" dir="ltr">
  <svg class="md-svg">
   <defs data-children-count="0">
    <svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg">
     <path d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z" fill="currentColor">
     </path>
    </svg>
   </defs>
  </svg>
  <input class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
  <input class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
  <label class="md-overlay" data-md-component="overlay" for="__drawer">
  </label>
  <a class="md-skip" href="#development/developer-guide" tabindex="1">
   Skip to content
  </a>
  <header class="md-header" data-md-component="header">
   <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
     <div class="md-flex__cell md-flex__cell--shrink">
      <a class="md-header-nav__button md-logo" href="../index.html" title="Flux Operator">
       <span class="material-symbols-outlined">
        cycle
       </span>
      </a>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer">
      </label>
     </div>
     <div class="md-flex__cell md-flex__cell--stretch">
      <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
       <span class="md-header-nav__topic" style="width: 1046px;margin-left: -20px;">
        Flux Operator
       </span>
       <span class="md-header-nav__topic">
        Developer Guide
       </span>
      </div>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--search md-header-nav__button" for="__search">
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
       <label class="md-search__overlay" for="__search">
       </label>
       <div class="md-search__inner" role="search">
        <form action="../search.html" class="md-search__form" method="get" name="search">
         <input autocapitalize="off" autocomplete="off" class="md-search__input" data-md-component="query" data-md-state="active" name="q" placeholder="Search" spellcheck="false" type="text"/>
         <label class="md-icon md-search__icon" for="__search">
         </label>
         <button class="md-icon md-search__icon" data-md-component="reset" tabindex="-1" type="reset">
          
         </button>
        </form>
        <div class="md-search__output">
         <div class="md-search__scrollwrap" data-md-scrollfix="">
          <div class="md-search-result" data-md-component="result">
           <div class="md-search-result__meta">
            Type to start searching
           </div>
           <ol class="md-search-result__list">
           </ol>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <div class="md-header-nav__source">
       <a class="md-source" data-md-source="github" href="https://github.com/flux-framework/flux-operator/" title="Go to repository">
        <div class="md-source__icon">
         <!--<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>-->
         <!-- updated to match riverml.xml site-->
         <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
          <path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z" fill="#ffffff">
          </path>
         </svg>
        </div>
        <div class="md-source__repository">
         Flux Operator
        </div>
       </a>
      </div>
     </div>
    </div>
   </nav>
  </header>
  <div class="md-container">
   <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
     <ul class="md-tabs__list">
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://flux-framework.org/">
        Flux Framework
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/flux-framework">
        Flux Framework on GitHub
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/flux-framework/flux-operator">
        Flux Operator on GitHub
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="index.html">
        Development
       </a>
      </li>
     </ul>
    </div>
   </nav>
   <main class="md-main">
    <div class="md-main__inner md-grid" data-md-component="container">
     <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav class="md-nav md-nav--primary" data-md-level="0">
         <label class="md-nav__title md-nav__title--site" for="__drawer">
          <a class="md-nav__button md-logo" href="../index.html" title="Flux Operator">
           <i class="md-icon">
            cycle
           </i>
          </a>
          <a href="../index.html" title="Flux Operator">
           Flux Operator
          </a>
         </label>
         <div class="md-nav__source">
          <a class="md-source" data-md-source="github" href="https://github.com/flux-framework/flux-operator/" title="Go to repository">
           <div class="md-source__icon">
            <!--<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>-->
            <!-- updated to match riverml.xml site-->
            <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
             <path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z" fill="#ffffff">
             </path>
            </svg>
           </div>
           <div class="md-source__repository">
            Flux Operator
           </div>
          </a>
         </div>
         <ul class="md-nav__list">
          <li class="md-nav__item">
           <span class="md-nav__link caption">
            <span class="caption-text">
             Getting Started
            </span>
           </span>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../getting_started/index.html">
            User Guide
           </a>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="index.html">
            Development
           </a>
           <ul class="md-nav__list">
            <li class="md-nav__item">
             <input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
             <label class="md-nav__link md-nav__link--active" for="__toc">
              Developer Guide
             </label>
             <a class="md-nav__link md-nav__link--active" href="#">
              Developer Guide
             </a>
             <nav class="md-nav md-nav--secondary">
              <label class="md-nav__title" for="__toc">
               Contents
              </label>
              <ul class="md-nav__list" data-md-scrollfix="">
               <li class="md-nav__item">
                <a class="md-nav__link" href="#development-developer-guide--page-root">
                 Developer Guide
                </a>
                <nav class="md-nav">
                 <ul class="md-nav__list">
                  <li class="md-nav__item">
                   <a class="md-nav__link" href="#setup">
                    Setup
                   </a>
                   <nav class="md-nav">
                    <ul class="md-nav__list">
                     <li class="md-nav__item">
                      <a class="md-nav__link" href="#local-development">
                       Local Development
                      </a>
                      <nav class="md-nav">
                       <ul class="md-nav__list">
                        <li class="md-nav__item">
                         <a class="md-nav__link" href="#quick-start">
                          1. Quick Start
                         </a>
                        </li>
                        <li class="md-nav__item">
                         <a class="md-nav__link" href="#configs">
                          2. Configs
                         </a>
                        </li>
                       </ul>
                      </nav>
                     </li>
                     <li class="md-nav__item">
                      <a class="md-nav__link" href="#interacting-with-services">
                       Interacting with Services
                      </a>
                      <nav class="md-nav">
                       <ul class="md-nav__list">
                        <li class="md-nav__item">
                         <a class="md-nav__link" href="#port-forward">
                          port-forward
                         </a>
                        </li>
                       </ul>
                      </nav>
                     </li>
                    </ul>
                   </nav>
                  </li>
                  <li class="md-nav__item">
                   <a class="md-nav__link" href="#build-images">
                    Build Images
                   </a>
                  </li>
                  <li class="md-nav__item">
                   <a class="md-nav__link" href="#documentation">
                    Documentation
                   </a>
                   <nav class="md-nav">
                    <ul class="md-nav__list">
                     <li class="md-nav__item">
                      <a class="md-nav__link" href="#install-dependencies-and-build">
                       Install Dependencies and Build
                      </a>
                     </li>
                     <li class="md-nav__item">
                      <a class="md-nav__link" href="#preview-documentation">
                       Preview Documentation
                      </a>
                     </li>
                    </ul>
                   </nav>
                  </li>
                 </ul>
                </nav>
               </li>
               <li class="md-nav__item">
                <a class="md-nav__extra_link" href="../_sources/development/developer-guide.md.txt">
                 Show Source
                </a>
               </li>
              </ul>
             </nav>
            </li>
            <li class="md-nav__item">
             <a class="md-nav__link" href="creation.html">
              Operator Creation
             </a>
            </li>
            <li class="md-nav__item">
             <a class="md-nav__link" href="designs.html">
              Designs
             </a>
            </li>
           </ul>
          </li>
          <li class="md-nav__item">
           <span class="md-nav__link caption">
            <span class="caption-text">
             About
            </span>
           </span>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../contributing.html">
            Contributing
           </a>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../about/license.html">
            License
           </a>
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav class="md-nav md-nav--secondary">
         <label class="md-nav__title" for="__toc">
          Contents
         </label>
         <ul class="md-nav__list" data-md-scrollfix="">
          <li class="md-nav__item">
           <a class="md-nav__link" href="#development-developer-guide--page-root">
            Developer Guide
           </a>
           <nav class="md-nav">
            <ul class="md-nav__list">
             <li class="md-nav__item">
              <a class="md-nav__link" href="#setup">
               Setup
              </a>
              <nav class="md-nav">
               <ul class="md-nav__list">
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#local-development">
                  Local Development
                 </a>
                 <nav class="md-nav">
                  <ul class="md-nav__list">
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#quick-start">
                     1. Quick Start
                    </a>
                   </li>
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#configs">
                     2. Configs
                    </a>
                   </li>
                  </ul>
                 </nav>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#interacting-with-services">
                  Interacting with Services
                 </a>
                 <nav class="md-nav">
                  <ul class="md-nav__list">
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#port-forward">
                     port-forward
                    </a>
                   </li>
                  </ul>
                 </nav>
                </li>
               </ul>
              </nav>
             </li>
             <li class="md-nav__item">
              <a class="md-nav__link" href="#build-images">
               Build Images
              </a>
             </li>
             <li class="md-nav__item">
              <a class="md-nav__link" href="#documentation">
               Documentation
              </a>
              <nav class="md-nav">
               <ul class="md-nav__list">
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#install-dependencies-and-build">
                  Install Dependencies and Build
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#preview-documentation">
                  Preview Documentation
                 </a>
                </li>
               </ul>
              </nav>
             </li>
            </ul>
           </nav>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__extra_link" href="../_sources/development/developer-guide.md.txt">
            Show Source
           </a>
          </li>
          <li class="md-nav__item" id="searchbox">
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-content">
      <article class="md-content__inner md-typeset" role="main">
       <section id="developer-guide">
        <h1 id="development-developer-guide--page-root">
         Developer Guide
         <a class="headerlink" href="#development-developer-guide--page-root" title="Permalink to this heading">
          ¶
         </a>
        </h1>
        <p>
         This developer guide includes complete instructions for setting up a developer
environment.
        </p>
        <section id="setup">
         <h2 id="setup">
          Setup
          <a class="headerlink" href="#setup" title="Permalink to this heading">
           ¶
          </a>
         </h2>
         <p>
          To work on this operator you should:
         </p>
         <ul class="simple">
          <li>
           <p>
            Have a recent version of Go installed (1.18.1)
           </p>
          </li>
          <li>
           <p>
            Have minikube installed
           </p>
          </li>
         </ul>
         <p>
          <strong>
           Important
          </strong>
          For minikube, make sure to enable
          <a class="reference external" href="https://minikube.sigs.k8s.io/docs/handbook/addons/ingress-dns/">
           DNS plugins
          </a>
          .
         </p>
         <div class="highlight-bash notranslate">
          <div class="highlight">
           <pre><span></span>$ minikube addons <span class="nb">enable</span> ingress
$ minikube addons <span class="nb">enable</span> ingress-dns
</pre>
          </div>
         </div>
         <p>
          The basic Flux networking (pods seeing one another) won’t work if your cluster does not support DNS.
You also won’t be able to expose the service with minikube service if you don’t do the above (but port-forward would technically work)
You’ll then also want to clone the repository.
         </p>
         <div class="highlight-bash notranslate">
          <div class="highlight">
           <pre><span></span><span class="c1"># Clone the source code</span>
$ git clone https://github.com/flux-framework/flux-operator
$ <span class="nb">cd</span> flux-operator
</pre>
          </div>
         </div>
         <section id="local-development">
          <h3 id="local-development">
           Local Development
           <a class="headerlink" href="#local-development" title="Permalink to this heading">
            ¶
           </a>
          </h3>
          <p>
           After cloning, you need to create your MiniKube cluster before doing anything else!
          </p>
          <section id="quick-start">
           <h4 id="quick-start">
            1. Quick Start
            <a class="headerlink" href="#quick-start" title="Permalink to this heading">
             ¶
            </a>
           </h4>
           <p>
            Here is a quick start for doing that, making the namespace, and installing the operator.
           </p>
           <div class="highlight-console notranslate">
            <div class="highlight">
             <pre><span></span><span class="gp"># </span>Start a minikube cluster
<span class="gp">$ </span>minikube start

<span class="gp"># </span>Make a flux operator namespace
<span class="gp">$ </span>kubectl create namespace flux-operator
<span class="go">namespace/flux-operator created</span>
</pre>
            </div>
           </div>
           <p>
            Here is how to build and install the operator:
           </p>
           <div class="highlight-default notranslate">
            <div class="highlight">
             <pre><span></span># Build the operator
$ make

# How to make your manifests
$ make manifests

# And install. This places an executable "bin/kustomize"
$ make install
</pre>
            </div>
           </div>
          </section>
          <section id="configs">
           <h4 id="configs">
            2. Configs
            <a class="headerlink" href="#configs" title="Permalink to this heading">
             ¶
            </a>
           </h4>
           <p>
            The job configs - custom resource definitions or “CRD” can be found in
            <a class="reference external" href="https://github.com/flux-framework/flux-operator/tree/main/config/samples">
             config/samples
            </a>
            .
Before launching any jobs, making sure
            <code class="docutils literal notranslate">
             <span class="pre">
              localDeploy
             </span>
            </code>
            is set to true in your CRD so you don’t ask for a persistent volume claim!
           </p>
           <div class="highlight-yaml notranslate">
            <div class="highlight">
             <pre><span></span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="c1"># Set to true to use volume mounts instead of volume claims</span><span class="w"></span>
<span class="w">  </span><span class="nt">localDeploy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre>
            </div>
           </div>
           <p>
            The default is set to true (so a local volume in
            <code class="docutils literal notranslate">
             <span class="pre">
              /tmp
             </span>
            </code>
            is used) but this won’t work on an actual cloud Kubernetes cluster,
and vice versa - the volume claim won’t work locally. When you are sure this is good,
here is how to “launch” the Mini Cluster (or if providing a command, an ephemeral job):
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>$ kubectl apply -f config/samples/flux-framework.org_v1alpha1_minicluster.yaml
</pre>
            </div>
           </div>
           <p>
            there is a courtesy function to clean, and apply the samples:
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>$ make clean  <span class="c1"># remove old flux-operator namespaced items</span>
$ make apply  <span class="c1"># apply the setup and job config</span>
$ make run    <span class="c1"># make the cluster</span>
</pre>
            </div>
           </div>
           <p>
            or run all three for easy development!
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>$ make redo  <span class="c1"># clean, apply, and run</span>
</pre>
            </div>
           </div>
           <p>
            To see logs for the job, you’d do:
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>$ kubectl logs -n flux-operator job.batch/flux-sample
</pre>
            </div>
           </div>
           <p>
            And this is also:
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>$ make log
</pre>
            </div>
           </div>
           <p>
            But the above gives you a (somewhat random?) pod. If you want to see a specific one do:
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>./script/log.sh flux-sample-0-b5rw6
</pre>
            </div>
           </div>
           <p>
            E.g., rank 0 is the “main” one. List running pods (each pod is part of a batch job)
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>$ make list
</pre>
            </div>
           </div>
           <p>
            And shell into one with the helper script:
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span>./script/shell.sh flux-sample-0-b5rw6
</pre>
            </div>
           </div>
          </section>
         </section>
         <section id="interacting-with-services">
          <h3 id="interacting-with-services">
           Interacting with Services
           <a class="headerlink" href="#interacting-with-services" title="Permalink to this heading">
            ¶
           </a>
          </h3>
          <p>
           Currently, the most reliable thing to do is port forward:
          </p>
          <section id="port-forward">
           <h4 id="port-forward">
            port-forward
            <a class="headerlink" href="#port-forward" title="Permalink to this heading">
             ¶
            </a>
           </h4>
           <p>
            If we run as a ClusterIP, we can accomplish the same with a one off
            <code class="docutils literal notranslate">
             <span class="pre">
              kubectl
             </span>
             <span class="pre">
              port-forward
             </span>
            </code>
            :
           </p>
           <div class="highlight-console notranslate">
            <div class="highlight">
             <pre><span></span><span class="go">kubectl port-forward -n flux-operator flux-sample-0-zdhkp 5000:5000</span>
<span class="go">Forwarding from 127.0.0.1:5000 -&gt; 5000</span>
</pre>
            </div>
           </div>
           <p>
            This means you can open
            <a class="reference external" href="http://localhost:5000">
             http://localhost:5000
            </a>
            to see the restful API (and interact with it there).
           </p>
           <p>
            If you want to use a minikube service, this seems to work, but is spotty - I think because
minikube is expecting the service to be available from any pod (it is only running from index 0).
If you want to try this:
           </p>
           <div class="highlight-console notranslate">
            <div class="highlight">
             <pre><span></span><span class="gp">$ </span>minikube service -n flux-operator flux-restful-service --url<span class="o">=</span><span class="nb">true</span>
</pre>
            </div>
           </div>
           <p>
            But for now I’m developing with port forward.
           </p>
          </section>
         </section>
        </section>
        <section id="build-images">
         <h2 id="build-images">
          Build Images
          <a class="headerlink" href="#build-images" title="Permalink to this heading">
           ¶
          </a>
         </h2>
         <p>
          If you want to build the “production” images - here is how to do that!
This happens in our Docker CI, however you can build (and deploy if you are an owner) them too!
         </p>
         <div class="highlight-bash notranslate">
          <div class="highlight">
           <pre><span></span>$ make docker-build
$ make docker-push
</pre>
          </div>
         </div>
         <div class="highlight-bash notranslate">
          <div class="highlight">
           <pre><span></span><span class="c1"># operator lifecycle manager</span>
$ operator-sdk olm install
$ make bundle
$ make bundle-build
$ make bundle-push
</pre>
          </div>
         </div>
         <p>
          And for the catalog:
         </p>
         <div class="highlight-bash notranslate">
          <div class="highlight">
           <pre><span></span>$ make catalog-build
$ make catalog-push
</pre>
          </div>
         </div>
        </section>
        <section id="documentation">
         <h2 id="documentation">
          Documentation
          <a class="headerlink" href="#documentation" title="Permalink to this heading">
           ¶
          </a>
         </h2>
         <p>
          The documentation is provided in the
          <code class="docutils literal notranslate">
           <span class="pre">
            docs
           </span>
          </code>
          folder of the repository, and generally most content that you might want to add is under
          <code class="docutils literal notranslate">
           <span class="pre">
            getting_started
           </span>
          </code>
          . For ease of contribution, files that are likely to be updated by contributors (e.g., mostly everything but the module generated files)
are written in markdown. If you need to use
          <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#table-of-contents">
           toctree
          </a>
          you should not use extra newlines or spaces (see index.md files for examples). The documentation is also provided in Markdown (instead of rst or restructured syntax) to make contribution easier for the community.
         </p>
         <p>
          Finally, we recommend you use the same development environment also to build and work on
documentation. The reason is because we import the app to derive docstrings,
and this will require having Flux.
         </p>
         <section id="install-dependencies-and-build">
          <h3 id="install-dependencies-and-build">
           Install Dependencies and Build
           <a class="headerlink" href="#install-dependencies-and-build" title="Permalink to this heading">
            ¶
           </a>
          </h3>
          <p>
           The documentation is built using sphinx, and generally you can
create a virtual environment:
          </p>
          <div class="highlight-bash notranslate">
           <div class="highlight">
            <pre><span></span>$ <span class="nb">cd</span> docs
$ python -m venv env 
$ <span class="nb">source</span> env/bin/activate
</pre>
           </div>
          </div>
          <p>
           And then install dependencies:
          </p>
          <div class="highlight-console notranslate">
           <div class="highlight">
            <pre><span></span><span class="gp">$ </span>pip install -r requirements.txt

<span class="gp"># </span>Build the docs into _build/html
<span class="gp">$ </span>make html
</pre>
           </div>
          </div>
         </section>
         <section id="preview-documentation">
          <h3 id="preview-documentation">
           Preview Documentation
           <a class="headerlink" href="#preview-documentation" title="Permalink to this heading">
            ¶
           </a>
          </h3>
          <p>
           After
           <code class="docutils literal notranslate">
            <span class="pre">
             make
            </span>
            <span class="pre">
             html
            </span>
           </code>
           you can enter into
           <code class="docutils literal notranslate">
            <span class="pre">
             _build/html
            </span>
           </code>
           and start a local web
server to preview:
          </p>
          <div class="highlight-console notranslate">
           <div class="highlight">
            <pre><span></span><span class="gp">$ </span>python -m http.server <span class="m">9999</span>
</pre>
           </div>
          </div>
          <p>
           And open your browser to
           <code class="docutils literal notranslate">
            <span class="pre">
             localhost:9999
            </span>
           </code>
          </p>
         </section>
        </section>
       </section>
      </article>
     </div>
    </div>
   </main>
  </div>
  <footer class="md-footer">
   <div class="md-footer-nav">
    <nav class="md-footer-nav__inner md-grid">
     <a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="index.html" rel="prev" title="Development">
      <div class="md-flex__cell md-flex__cell--shrink">
       <i class="md-icon md-icon--arrow-back md-footer-nav__button">
       </i>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
       <span class="md-flex__ellipsis">
        <span class="md-footer-nav__direction">
         Previous
        </span>
        Development
       </span>
      </div>
     </a>
     <a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="creation.html" rel="next" title="Operator Creation">
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
       <span class="md-flex__ellipsis">
        <span class="md-footer-nav__direction">
         Next
        </span>
        Operator Creation
       </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
       <i class="md-icon md-icon--arrow-forward md-footer-nav__button">
       </i>
      </div>
     </a>
    </nav>
   </div>
   <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
     <div class="md-footer-copyright">
      <div class="md-footer-copyright__highlight">
       © Copyright 2022, Flux Developers.
      </div>
      Last updated on
              Nov 21, 2022.
      <br/>
      Created using
      <a href="http://www.sphinx-doc.org/">
       Sphinx
      </a>
      5.3.0.
             and
      <a href="https://github.com/bashtage/sphinx-material/">
       Material for
              Sphinx
      </a>
     </div>
    </div>
   </div>
  </footer>
  <script src="../_static/javascripts/application.js">
  </script>
  <script>
   app.initialize({version: "1.0.4", url: {base: ".."}})
  </script>
 </body>
</html>